import{_ as c,h as I,c as v,a as r,w as d,v as l,i as U,f as b,u as R,g as C}from"./index-DjsB7_Em.js";import{initializeApp as _}from"https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";import{getFirestore as D,collection as L,addDoc as k,query as q,where as g,getDocs as A}from"https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";const E={id:"RegisterContainer"},S={__name:"Register",setup(x){const p=_({apiKey:"AIzaSyAQpMoxAKJrkave5D9e8CqKeLffCCUeGAw",authDomain:"vexa-d596e.firebaseapp.com",projectId:"vexa-d596e",storageBucket:"vexa-d596e.appspot.com",messagingSenderId:"79833394084",appId:"1:79833394084:web:1e5f41859b4125ef342f31"}),m=D(p),u=L(m,"vexaUsers"),o=I({username:"",email:"",password:""});function a(){return"vexapeercodeforstream_"+Math.random().toString(36).substring(2,12)}async function i(t,e){const s=q(u,g(t,"==",e));return!(await A(s)).empty}async function f(){const{username:t,email:e,password:s}=o;if(!t.trim()||!e.trim()||!s.trim()){alert("Please fill out all fields.");return}if(await i("username",t.trim())){alert("Username is already taken.");return}if(await i("email",e.trim())){alert("Email is already registered.");return}let n;do n=a();while(await i("PeerID",n));try{const w=await k(u,{username:t.trim(),email:e.trim(),password:s.trim(),PeerID:n,Role:"Vexian",isLiveNow:!1,UsersThatFollowsHim:[]});alert(`User Added With ID: ${w.id}`),o.username="",o.email="",o.password=""}catch(w){console.error("Error Adding User:",w),alert("Failed to add user. See console for details.")}}return(t,e)=>(b(),v("div",E,[e[7]||(e[7]=r("h2",null,"Register",-1)),r("form",{id:"user-form",onSubmit:U(f,["prevent"])},[r("div",null,[e[3]||(e[3]=r("label",{for:"username"},"Username:",-1)),d(r("input",{type:"text",id:"username","onUpdate:modelValue":e[0]||(e[0]=s=>o.username=s),required:"",placeholder:"Enter unique username"},null,512),[[l,o.username]])]),r("div",null,[e[4]||(e[4]=r("label",{for:"email"},"Email:",-1)),d(r("input",{type:"email",id:"email","onUpdate:modelValue":e[1]||(e[1]=s=>o.email=s),required:"",placeholder:"Enter email"},null,512),[[l,o.email]])]),r("div",null,[e[5]||(e[5]=r("label",{for:"password"},"Password:",-1)),d(r("input",{type:"password",id:"password","onUpdate:modelValue":e[2]||(e[2]=s=>o.password=s),required:"",placeholder:"Enter password"},null,512),[[l,o.password]])]),e[6]||(e[6]=r("button",{type:"submit"},"Register",-1))],32)]))}},V=c(S,[["__scopeId","data-v-d7f90386"]]),$={id:"LoginContainer"},P={__name:"Login",setup(x){const p=_({apiKey:"AIzaSyAQpMoxAKJrkave5D9e8CqKeLffCCUeGAw",authDomain:"vexa-d596e.firebaseapp.com",projectId:"vexa-d596e",storageBucket:"vexa-d596e.appspot.com",messagingSenderId:"79833394084",appId:"1:79833394084:web:1e5f41859b4125ef342f31"}),m=D(p),u=L(m,"vexaUsers"),o=R(),a=I({username:"",password:""});function i(t,e,s=7){const n=new Date(Date.now()+s*864e5).toUTCString();document.cookie=`${t}=${encodeURIComponent(e)}; expires=${n}; path=/`}async function f(){const{username:t,password:e}=a;if(!t.trim()||!e.trim()){alert("Please enter both username and password.");return}const s=q(u,g("username","==",t.trim()),g("password","==",e.trim()));(await A(s)).empty?alert("Invalid username or password."):(alert("Login successful!"),i("vexaUser",t.trim()),o.push("/home"))}return(t,e)=>(b(),v("div",$,[e[5]||(e[5]=r("h2",null,"Login",-1)),r("form",{onSubmit:U(f,["prevent"])},[r("div",null,[e[2]||(e[2]=r("label",{for:"username"},"Username:",-1)),d(r("input",{type:"text",id:"username","onUpdate:modelValue":e[0]||(e[0]=s=>a.username=s),required:"",placeholder:"Enter your username"},null,512),[[l,a.username]])]),r("div",null,[e[3]||(e[3]=r("label",{for:"password"},"Password:",-1)),d(r("input",{type:"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=s=>a.password=s),required:"",placeholder:"Enter your password"},null,512),[[l,a.password]])]),e[4]||(e[4]=r("button",{type:"submit"},"Login",-1))],32)]))}},h=c(P,[["__scopeId","data-v-d2cb901b"]]),K={id:"formsContainer"},B={id:"registerContainer"},F={id:"loginContainer"},M={__name:"RegisterLogin",setup(x){return(y,p)=>(b(),v("div",K,[r("div",B,[C(V)]),r("div",F,[C(h)])]))}},j=c(M,[["__scopeId","data-v-e781619c"]]);export{j as default};
