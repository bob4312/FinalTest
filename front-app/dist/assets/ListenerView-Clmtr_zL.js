import{r as i,c as d,e as c,a as s,w as p,b as f,v as _,f as v}from"./index-Tdw-LXIy.js";import{$ as g}from"./bundler-CViGtuft.js";const h={style:{padding:"2rem","max-width":"600px",margin:"auto"}},b=["disabled"],x={__name:"Listener",setup(u){const t=i(""),r=i(!1),a=i(null);let l=null;function m(){const n=t.value.trim();if(n.length!==5)return alert("Room ID must be exactly 5 characters.");l=new g,l.on("open",()=>{console.log("Listener Peer open, calling host:",n);const e=l.call(n);if(!e)return console.error("peer.call returned:",e),alert("Unable to initiate call");e.on("stream",o=>{if(!a.value){console.error("remoteAudio ref is missing");return}console.log("Received remote stream:",o),a.value.srcObject=o,r.value=!0}),e.on("error",o=>{console.error("Call error:",o),alert("Could not connect to host: "+o)}),e.on("close",()=>{console.log("Host closed the call"),r.value=!1})}),l.on("error",e=>{console.error("PeerJS error (listener):",e),alert("Listener peer error: "+e)})}return(n,e)=>(c(),d("div",h,[e[1]||(e[1]=s("h2",null,"Listener Mode",-1)),e[2]||(e[2]=s("label",{for:"hostId"},"Enter Room ID:",-1)),p(s("input",{id:"hostId","onUpdate:modelValue":e[0]||(e[0]=o=>t.value=o),placeholder:"e.g. abcde",style:{display:"block",width:"100%",margin:".5rem 0",padding:".5rem"}},null,512),[[_,t.value]]),s("button",{onClick:m,disabled:r.value}," ðŸ‘‚ Join Stream ",8,b),r.value?(c(),d("audio",{key:0,ref_key:"remoteAudio",ref:a,autoplay:"",controls:"",style:{display:"block",width:"100%","margin-top":"1rem"}},null,512)):f("",!0)]))}},y={style:{padding:"2rem","max-width":"600px",margin:"auto"}},$={__name:"ListenerView",setup(u){return(t,r)=>(c(),d("div",y,[v(x)]))}};export{$ as default};
