import{$ as f}from"./bundler-CViGtuft.js";import{_ as h,r as d,o as y,c as n,a as r,b as _,d as x,t as m,F as I,e as M,f as s,g as w}from"./index-D9DuZ9YB.js";const b={style:{padding:"2rem","max-width":"600px",margin:"auto"}},k=["disabled"],H={key:0,style:{"margin-top":"1rem",color:"green"}},$={key:1,style:{"margin-top":"1.5rem"}},D={__name:"Host",setup(g){function p(){return Math.random().toString(36).substring(2,7)}const a=d(p()),u=d(!1),t=d([]);let l=null,c=null;y(()=>{l=new f(a.value),l.on("open",e=>{a.value=e,console.log("Host Peer ready with ID:",e)}),l.on("error",e=>{console.error("PeerJS error (host):",e),alert("Host error: "+e)}),l.on("call",e=>{if(console.log("Incoming call from listener:",e.peer),!c){alert("Please start your mic first!");return}e.answer(c),t.value.includes(e.peer)||t.value.push(e.peer),e.on("close",()=>{t.value=t.value.filter(o=>o!==e.peer)}),e.on("error",o=>{console.error("Listener connection error:",o),t.value=t.value.filter(i=>i!==e.peer)})})});async function v(){try{c=await navigator.mediaDevices.getUserMedia({audio:!0}),u.value=!0}catch(e){alert("Could not access mic: "+e.message)}}return(e,o)=>(s(),n("div",b,[o[1]||(o[1]=r("h2",null,"Host Mode",-1)),r("p",null,[o[0]||(o[0]=x("Room ID to share: ")),r("strong",null,m(a.value),1)]),r("button",{onClick:v,disabled:u.value}," ðŸ”Š Start My Mic ",8,k),u.value?(s(),n("p",H," Mic is live â€” listeners can join using that Room ID. ")):_("",!0),t.value.length?(s(),n("div",$,[r("p",null,[r("strong",null,"Connected listeners ("+m(t.value.length)+"):",1)]),r("ul",null,[(s(!0),n(I,null,M(t.value,i=>(s(),n("li",{key:i},m(i),1))),128))])])):_("",!0)]))}},S=h(D,[["__scopeId","data-v-d24c3469"]]),V={style:{padding:"2rem","max-width":"600px",margin:"auto"}},P={__name:"HostVIew",setup(g){return(p,a)=>(s(),n("div",V,[w(S)]))}};export{P as default};
