import{_ as K,r as p,o as L,m as P,c as r,g as R,a,w as Y,v as q,d as z,F as f,e as y,u as G,f as c,n as H,t as m,i as Q}from"./index-xxZ0FEtH.js";import{N as j}from"./NavBar-C-sxRAdF.js";import{initializeApp as J}from"https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";import{getFirestore as W,collection as X,getDocs as i,query as v,where as h,doc as x,updateDoc as k,arrayUnion as b}from"https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";import{c as Z}from"./index-BEx9OQ4g.js";import"./_commonjsHelpers-gnU0ypJ3.js";const ee={id:"explore-page"},te={id:"container-Of-Search-Bar"},se={id:"container-Of-Types"},ae=["onClick"],oe={id:"container-Of-People-That-Created-A-Channel"},ne=["onClick"],re=["src"],ce={class:"tag"},le=["onClick"],ie={__name:"ExploreView",setup(ue){const T=G(),D=J({apiKey:"AIzaSyAQpMoxAKJrkave5D9e8CqKeLffCCUeGAw",authDomain:"vexa-d596e.firebaseapp.com",projectId:"vexa-d596e",storageBucket:"vexa-d596e.appspot.com",messagingSenderId:"79833394084",appId:"1:79833394084:web:1e5f41859b4125ef342f31"}),u=W(D),l=X(u,"vexaUsers"),F=Z("https://pnaenrrtsasabsbxaeke.supabase.co","<YOUR_ANON_KEY>"),g=p([]),d=p(""),S=["Technology","Sports","Music","News","Gaming","Business"],n=p("");L(async()=>{(await i(l)).forEach(s=>{const e=s.data(),{publicUrl:o}=F.storage.from("logos").getPublicUrl(e.username).data;g.value.push({id:s.id,username:e.username,logoUrl:o,genre:e.genre||""})})});const $=P(()=>g.value.filter(t=>{const s=t.username.toLowerCase().includes(d.value.toLowerCase()),e=n.value?t.genre===n.value:!0;return s&&e}));function N(t){n.value=n.value===t?"":t}async function O(t){const s=v(l,h("username","==",t)),e=await i(s);if(e.empty){alert(`User ${t} not found.`);return}const o=e.docs[0];T.push({name:"ProfileChannel",params:{idOfOwner:o.id,owner:t}})}async function A(t){var C,U;const s=(C=document.cookie.split("; ").find(M=>M.startsWith("vexaUser=")))==null?void 0:C.split("=")[1];if(!s){alert("Current user not logged in.");return}const e=v(l,h("username","==",s)),o=await i(e);if(o.empty){alert(`Current user ${s} not found.`);return}const w=o.docs[0],B=x(u,"vexaUsers",w.id);if((U=w.data().UsersThatHeFollows)==null?void 0:U.includes(t)){alert(`You're already following ${t}`);return}const E=v(l,h("username","==",t)),_=await i(E);if(_.empty){alert(`User ${t} not found.`);return}const V=_.docs[0],I=x(u,"vexaUsers",V.id);await k(B,{UsersThatHeFollows:b(t)}),await k(I,{UsersThatFollowsHim:b(s)}),alert(`You are now following ${t}`)}return(t,s)=>(c(),r(f,null,[R(j),a("div",ee,[s[2]||(s[2]=a("h1",{id:"title-Of-Explore-Page"},"Explore",-1)),a("div",te,[Y(a("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>d.value=e),placeholder:"Search channels...",id:"search-input"},null,512),[[q,d.value]])]),a("div",se,[(c(),r(f,null,y(S,e=>a("button",{key:e,class:H({"active-tag":n.value===e}),onClick:o=>N(e)},m(e),11,ae)),64)),n.value?(c(),r("button",{key:0,class:"clear-tags",onClick:s[1]||(s[1]=e=>n.value="")},"Clear")):z("",!0)]),a("div",oe,[(c(!0),r(f,null,y($.value,e=>(c(),r("div",{key:e.username,class:"channel-card",onClick:o=>O(e.username)},[a("img",{src:e.logoUrl,alt:"avatar",class:"avatar"},null,8,re),a("h2",null,m(e.username),1),a("p",ce,m(e.genre||"General"),1),a("button",{onClick:Q(o=>A(e.username),["stop"])},"Follow",8,le)],8,ne))),128))])])],64))}},Ce=K(ie,[["__scopeId","data-v-11c00bf0"]]);export{Ce as default};
